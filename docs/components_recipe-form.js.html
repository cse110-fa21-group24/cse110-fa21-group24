<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/recipe-form.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/recipe-form.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @classdesc A template for the recipe form which allows users to edit
 *            a recipe in their cookbook and their details.
 *
 */
export class RecipeForm extends HTMLElement {
  constructor() {
    super();
    this.attachShadow({ mode: "open" });

    const stylesheet = document.createElement("link");
    stylesheet.rel = "stylesheet";
    stylesheet.href = "styles/recipe-form.css";

    const recipeForm = document
      .getElementById("recipe-form-template")
      .content.cloneNode(true);

    this.shadowRoot.append(stylesheet);
    this.shadowRoot.append(recipeForm);
  }

  set recipe(recipeObj) {
    this.internalRecipe = recipeObj;
  }

  get recipe() {
    return this.internalRecipe;
  }

  set recipeKey(newRecipeKey) {
    this.internalRecipeKey = newRecipeKey;
  }

  get recipeKey() {
    return this.internalRecipeKey;
  }

  set cookbookTitle(newCookbookTitle) {
    this.internalCookbookTitle = newCookbookTitle;
  }

  get cookbookTitle() {
    return this.internalCookbookTitle;
  }

  /**
   * Pre-fill the recipe edit form with all the changeable fields of a recipe
   * @param {object} recipeObj An object containing all the necessary properties
   *                           that would show up in the recipe page
   */
  populateRecipeForm(recipeObj) {
    let shadow = this.shadowRoot;
    this.recipe = recipeObj;

    // Pre-fill the recipe title and description
    shadow.getElementById("edit-title-input").value = recipeObj.title;
    shadow.getElementById("edit-description-input").value =
      recipeObj.description;

    // Clear ingredients section
    let ingredientsList = shadow.getElementById("ingredients-list-container");

    // We do not want to remove the last child of the ingredients list, which
    // is actually the Add Ingredient button
    while (ingredientsList.children[ingredientsList.children.length - 2]) {
      ingredientsList.removeChild(ingredientsList.firstChild);
    }

    // Pre-fill the recipe ingredients
    for (let i = 0; i &lt; recipeObj.ingredients.length; ++i) {
      this.addIngredient(
        recipeObj.ingredients[i].amount,
        recipeObj.ingredients[i].unit,
        recipeObj.ingredients[i].name
      );
    }

    // Clear instructions section
    let instructionsList = shadow.getElementById("edit-instructions-list");
    instructionsList.innerHTML = "";

    // Pre-fill the recipe instructions
    for (let i = 0; i &lt; recipeObj.instructions.length; ++i) {
      this.addInstruction(recipeObj.instructions[i]);
    }
  }

  /**
   * Adds a new ingredient to the recipe form
   * @param {number} amount The number of units of an ingredient
   * @param {string} unit The unit of measurement of the ingredient
   * @param {string} name The name of the ingredient
   */
  addIngredient(amount, unit, name) {
    let shadow = this.shadowRoot;
    let addIngredientButton = shadow.getElementById("add-ingredient-button");

    // Build the ingredient container
    let ingredientContainer = document.createElement("div");
    ingredientContainer.classList.add("edit-ingredient-item");
    addIngredientButton.before(ingredientContainer);

    // Build the amount field
    let amountField = document.createElement("input");
    amountField.type = "number";
    amountField.classList.add("edit-ingredient-amount-input");
    amountField.placeholder = "0";
    amountField.value = amount;
    ingredientContainer.append(amountField);

    // Build the units field
    let unitField = document.createElement("input");
    unitField.type = "text";
    unitField.classList.add("edit-ingredient-unit-input");
    unitField.placeholder = "unit";
    unitField.value = unit;
    ingredientContainer.append(unitField);

    // Build the ingredient name field
    let ingredientName = document.createElement("input");
    ingredientName.type = "text";
    ingredientName.classList.add("edit-ingredient-name-input");
    ingredientName.placeholder = "Ingredient name";
    ingredientName.value = name;
    ingredientContainer.append(ingredientName);

    // Build the recycle bin button
    let recycleBin = document.createElement("button");
    recycleBin.type = "button";
    recycleBin.classList.add("recycle-bin-button");
    recycleBin.classList.add("ingredient-recycle-bin");

    let recycleBinImage = document.createElement("img");
    recycleBinImage.classList.add("recycle-bin-icon");
    recycleBinImage.classList.add("ingredient-recycle-bin");
    recycleBinImage.src = "images/recycle-bin.png";
    recycleBinImage.alt = "recycle-bin";

    recycleBin.append(recycleBinImage);
    ingredientContainer.append(recycleBin);
  }

  /**
   * Adds a new instruction to the recipe form
   * @param {string} instruction A single recipe instruction
   */
  addInstruction(instruction) {
    let shadow = this.shadowRoot;
    let instructionsList = shadow.getElementById("edit-instructions-list");

    // Build the instructions container
    let instructionContainer = document.createElement("div");
    instructionContainer.classList.add("edit-instruction-item");
    instructionsList.append(instructionContainer);

    // Build the instruction number
    let number = document.createElement("li");
    number.classList.add("edit-instruction-number");
    instructionContainer.append(number);

    // Build the instruction content container
    let content = document.createElement("div");
    content.classList.add("edit-instruction-content");
    instructionContainer.append(content);

    // Build the instruction field
    let instructionField = document.createElement("textarea");
    instructionField.classList.add("edit-instruction-input");
    instructionField.placeholder = "Instruction";
    instructionField.value = instruction;
    content.append(instructionField);

    // Build the recycle bin button
    let recycleBin = document.createElement("button");
    recycleBin.type = "button";
    recycleBin.classList.add("recycle-bin-button");
    recycleBin.classList.add("instruction-recycle-bin");

    let recycleBinImage = document.createElement("img");
    recycleBinImage.classList.add("recycle-bin-icon");
    recycleBinImage.classList.add("instruction-recycle-bin");
    recycleBinImage.src = "images/recycle-bin.png";
    recycleBinImage.alt = "recycle-bin";

    recycleBin.append(recycleBinImage);
    content.append(recycleBin);
  }

  /**
   * Removes an ingredient from the recipe form
   * @param {Element} recycleBin The recycle bin that triggered the deletion
   */
  deleteIngredient(recycleBin) {
    let parent = recycleBin.parentElement;

    while (!parent.classList.contains("edit-ingredient-item")) {
      parent = parent.parentElement;
    }

    parent.remove();
  }

  /**
   * Removes an instruction from the recipe form
   * @param {Element} recycleBin The recycle bin that triggered the deletion
   */
  deleteInstruction(recycleBin) {
    let parent = recycleBin.parentElement;

    while (!parent.classList.contains("edit-instruction-item")) {
      parent = parent.parentElement;
    }

    parent.remove();
  }

  /**
   * Gets the updated recipe info
   * @returns {object} An object containing a recipe with the updated recipe
   *                   info that was changed in the recipe form
   */
  getEditedRecipe() {
    let shadow = this.shadowRoot;
    let updatedRecipe = this.recipe;

    // Get the updated recipe title and description
    updatedRecipe.title = shadow.getElementById("edit-title-input").value;
    updatedRecipe.description = shadow.getElementById(
      "edit-description-input"
    ).value;

    // Get the updated ingredients
    let newIngredients = [];
    let updatedIngredients = shadow.getElementById(
      "ingredients-list-container"
    ).children;

    // We do not want to access the last child of the ingredients list since
    // the last child is actually the Add Ingredient button
    for (let i = 0; i &lt; updatedIngredients.length - 1; ++i) {
      let ingredient = {};

      ingredient.amount = Number(
        updatedIngredients[i].querySelector(".edit-ingredient-amount-input")
          .value
      );
      ingredient.unit = updatedIngredients[i].querySelector(
        ".edit-ingredient-unit-input"
      ).value;
      ingredient.name = updatedIngredients[i].querySelector(
        ".edit-ingredient-name-input"
      ).value;

      newIngredients.push(ingredient);
    }

    updatedRecipe.ingredients = newIngredients;

    // Get the updated instructions
    let newInstructions = [];
    let updatedInstructions = shadow.getElementById(
      "edit-instructions-list"
    ).children;

    for (let i = 0; i &lt; updatedInstructions.length; ++i) {
      let instruction = updatedInstructions[i].querySelector(
        ".edit-instruction-input"
      ).value;
      newInstructions.push(instruction);
    }

    updatedRecipe.instructions = newInstructions;

    return updatedRecipe;
  }
}

customElements.define("recipe-form", RecipeForm);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="cookbook.html">cookbook</a></li><li><a href="cookbookCard.html">cookbookCard</a></li><li><a href="CreateCookbook.html">CreateCookbook</a></li><li><a href="EditCookbook.html">EditCookbook</a></li><li><a href="ExplorePage.html">ExplorePage</a></li><li><a href="FooterImg.html">FooterImg</a></li><li><a href="HomePage.html">HomePage</a></li><li><a href="IndexedDbInterface.html">IndexedDbInterface</a></li><li><a href="Navbar.html">Navbar</a></li><li><a href="NotificationRecipeAdded.html">NotificationRecipeAdded</a></li><li><a href="NotificationRecipeDeleted.html">NotificationRecipeDeleted</a></li><li><a href="NotificationSelectCookbook.html">NotificationSelectCookbook</a></li><li><a href="RecipeCard.html">RecipeCard</a></li><li><a href="RecipeForm.html">RecipeForm</a></li><li><a href="RecipePage.html">RecipePage</a></li><li><a href="Router.html">Router</a></li><li><a href="SingleCookbook.html">SingleCookbook</a></li><li><a href="SpoonacularInterface.html">SpoonacularInterface</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addRecipe">addRecipe</a></li><li><a href="global.html#bindClearFiltersButton">bindClearFiltersButton</a></li><li><a href="global.html#bindCollapsibleFiltersBindthebuttonstocollapseandexpandthefiltersforthefiltersontheexplorepage.">bindCollapsibleFilters

Bind the buttons to collapse and expand the filters for the filters on the explore page.</a></li><li><a href="global.html#bindCookbookCardButtons">bindCookbookCardButtons</a></li><li><a href="global.html#bindCookbookRecipeCardButtons">bindCookbookRecipeCardButtons</a></li><li><a href="global.html#bindCreateCookbookSave">bindCreateCookbookSave</a></li><li><a href="global.html#bindExploreLoadButton">bindExploreLoadButton</a></li><li><a href="global.html#bindExploreSearchButton">bindExploreSearchButton</a></li><li><a href="global.html#bindHomeExploreRecipeCards">bindHomeExploreRecipeCards</a></li><li><a href="global.html#bindRecipeFormButtons">bindRecipeFormButtons</a></li><li><a href="global.html#bindScaling">bindScaling</a></li><li><a href="global.html#bindSelectCookbookButtons">bindSelectCookbookButtons</a></li><li><a href="global.html#buttonsEditCookbook">buttonsEditCookbook</a></li><li><a href="global.html#connectCreateNewCookbook()">connectCreateNewCookbook()</a></li><li><a href="global.html#connectNavbarButtons">connectNavbarButtons</a></li><li><a href="global.html#connectRecipeAction">connectRecipeAction</a></li><li><a href="global.html#connectRecipeBackButton">connectRecipeBackButton</a></li><li><a href="global.html#constructor">constructor</a></li><li><a href="global.html#createCookbook">createCookbook</a></li><li><a href="global.html#createCreateCookbook">createCreateCookbook</a></li><li><a href="global.html#createEditCookbook">createEditCookbook</a></li><li><a href="global.html#createExplorePage">createExplorePage</a></li><li><a href="global.html#createFooterImg">createFooterImg</a></li><li><a href="global.html#createHomePage">createHomePage</a></li><li><a href="global.html#createNavbar">createNavbar</a></li><li><a href="global.html#createNotificationRecipeAdded">createNotificationRecipeAdded</a></li><li><a href="global.html#createNotificationRecipeDeleted">createNotificationRecipeDeleted</a></li><li><a href="global.html#createNotificationSelectCookbook">createNotificationSelectCookbook</a></li><li><a href="global.html#createRecipeForm">createRecipeForm</a></li><li><a href="global.html#createRecipePage">createRecipePage</a></li><li><a href="global.html#createSingleCookbook">createSingleCookbook</a></li><li><a href="global.html#deleteCookbook">deleteCookbook</a></li><li><a href="global.html#deleteRecipe">deleteRecipe</a></li><li><a href="global.html#editCookbook">editCookbook</a></li><li><a href="global.html#editRecipe">editRecipe</a></li><li><a href="global.html#fillEditCookbook">fillEditCookbook</a></li><li><a href="global.html#getAllCookbooks">getAllCookbooks</a></li><li><a href="global.html#getAllRecipes">getAllRecipes</a></li><li><a href="global.html#getRandomRecipes">getRandomRecipes</a></li><li><a href="global.html#getRecipeInfo">getRecipeInfo</a></li><li><a href="global.html#getRecipes">getRecipes</a></li><li><a href="global.html#homeExploreButton">homeExploreButton</a></li><li><a href="global.html#homeSearchFunction()">homeSearchFunction()</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#initializeDefaultCookbook">initializeDefaultCookbook</a></li><li><a href="global.html#loadExplorePage">loadExplorePage</a></li><li><a href="global.html#makeRequest">makeRequest</a></li><li><a href="global.html#navigate">navigate</a></li><li><a href="global.html#openDb">openDb</a></li><li><a href="global.html#populateCookbooksPage">populateCookbooksPage</a></li><li><a href="global.html#populateExplorePage">populateExplorePage</a></li><li><a href="global.html#populateHomePage">populateHomePage</a></li><li><a href="global.html#populateSelectCookbookOptions">populateSelectCookbookOptions</a></li><li><a href="global.html#populateSingleCookbook">populateSingleCookbook</a></li><li><a href="global.html#toggleExplorePageType">toggleExplorePageType</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Thu Dec 09 2021 08:20:35 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>

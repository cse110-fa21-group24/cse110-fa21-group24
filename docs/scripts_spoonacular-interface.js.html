<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: scripts/spoonacular-interface.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: scripts/spoonacular-interface.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const SPOONACULAR_API_KEY = "83c84ad2b0e4486f93cfbe9658d21c66";
const MOCK_RECIPES_ARRAY = {
  results: [
    {
      id: 0,
      title: "title-0",
      image: "images/pasta.jpg",
    },
    {
      id: 1,
      title: "title-1",
      image: "images/pasta.jpg",
    },
    {
      id: 2,
      title: "title-2",
      image: "images/pasta.jpg",
    },
    {
      id: 3,
      title: "title-3",
      image: "images/pasta.jpg",
    },
    {
      id: 4,
      title: "title-4",
      image: "images/pasta.jpg",
    },
    {
      id: 5,
      title: "title-5",
      image: "images/pasta.jpg",
    },
  ],
};
const MOCK_RECIPE_INFO = {
  title: "title",
  creditsText: "author",
  cuisines: ["cuisine-0", "cuisine-1"],
  readyInMinutes: 10,
  image: "images/pasta.jpg",
  summary: "description",
  servings: 2,
  extendedIngredients: [
    { amount: 1, unit: "cup", name: "ingredient-0" },
    { amount: 3, unit: "cup", name: "ingredient-1" },
  ],
  analyzedInstructions: [
    { steps: [{ step: "instruction-1" }, { step: "instruction-2" }] },
  ],
};

// Change this variable to true to make real API calls to Spoonacular
let SPOONACULAR_ENABLED = true;

/**
 * @classdesc An interface for fetching recipes and recipe information using
 *            the Spoonacular API at https://spoonacular.com/food-api
 */
export class SpoonacularInterface {
  /**
   * @function getRecipes
   * @description Retrieves the ID, title, and image of several recipes
   * @param {object} filtersObj An object containing queries where keys
   *                            represent the query and key values represent
   *                            the query value
   * @returns {array} An array containing multiple smaller objects which
   *                  contain an ID title, and image for each retrieved recipe
   */
  async getRecipes(filtersObj) {
    let requestUrl =
      "https://api.spoonacular.com/recipes/complexSearch?apiKey=" +
      SPOONACULAR_API_KEY +
      "&amp;instructionsRequired=true";

    for (const filter in filtersObj) {
      if (filtersObj.hasOwnProperty(filter)) {
        requestUrl += "&amp;" + filter + "=" + filtersObj[filter];
      }
    }

    let responseData = await this.makeRequest(requestUrl);
    let recipes = [];

    for (let i = 0; i &lt; responseData.results.length; ++i) {
      recipes.push({
        id: responseData.results[i].id,
        title: responseData.results[i].title,
        image: responseData.results[i].image,
      });
    }

    return recipes;
  }

  /**
   * @function getRandomRecipes
   * @description Retrieves the ID, title, and image of multiple random recipes
   * @param {number} numResults The number of recipes to retrieve
   * @returns {array} An array containing multiple smaller objects which
   *                  contain an ID title, and image for each retrieved recipe
   */
  async getRandomRecipes(numResults) {
    let requestUrl =
      "https://api.spoonacular.com/recipes/complexSearch?apiKey=" +
      SPOONACULAR_API_KEY +
      "&amp;instructionsRequired=true&amp;sort=random" +
      "&amp;number=" +
      numResults;

    let responseData = await this.makeRequest(requestUrl);
    let recipes = [];

    for (let i = 0; i &lt; responseData.results.length; ++i) {
      recipes.push({
        id: responseData.results[i].id,
        title: responseData.results[i].title,
        image: responseData.results[i].image,
      });
    }

    return recipes;
  }

  /**
   * @function getRecipeInfo
   * @description Retrieves detailed information about a recipe
   * @param {number} id The ID of the recipe to parse information from
   * @returns {object} An object containing several properties of the recipe
   */
  async getRecipeInfo(id) {
    let requestUrl =
      "https://api.spoonacular.com/recipes/" +
      id +
      "/information?apiKey=" +
      SPOONACULAR_API_KEY;

    let recipe = await this.makeRequest(requestUrl);
    let ingredients = [];

    for (let i = 0; i &lt; recipe.extendedIngredients.length; ++i) {
      let ingredientObj = {};
      ingredientObj.amount = recipe.extendedIngredients[i].amount;
      ingredientObj.unit = recipe.extendedIngredients[i].unit;
      ingredientObj.name = recipe.extendedIngredients[i].name;
      ingredients.push(ingredientObj);
    }

    let instructions = [];

    for (let i = 0; i &lt; recipe.analyzedInstructions[0].steps.length; ++i) {
      instructions.push(recipe.analyzedInstructions[0].steps[i].step);
    }

    return {
      id: id,
      title: recipe.title,
      author: recipe.creditsText,
      cuisines: recipe.cuisines,
      readyInMinutes: recipe.readyInMinutes,
      image: recipe.image,
      description: recipe.summary,
      servings: recipe.servings,
      ingredients: ingredients,
      instructions: instructions,
    };
  }

  /**
   * @function makeRequest
   * @description An internal function that makes API calls
   * @param {string} requestUrl The url to fetch from
   * @returns {Promise} The data parsed from the response
   */
  async makeRequest(requestUrl) {
    if (!SPOONACULAR_ENABLED) {
      if (requestUrl.includes("complexSearch")) {
        return MOCK_RECIPES_ARRAY;
      } else {
        return MOCK_RECIPE_INFO;
      }
    }
    let response = await fetch(requestUrl);
    let data = await response.json();
    return data;
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="cookbook.html">cookbook</a></li><li><a href="cookbookCard.html">cookbookCard</a></li><li><a href="CreateCookbook.html">CreateCookbook</a></li><li><a href="EditCookbook.html">EditCookbook</a></li><li><a href="ExplorePage.html">ExplorePage</a></li><li><a href="FooterImg.html">FooterImg</a></li><li><a href="HomePage.html">HomePage</a></li><li><a href="IndexedDbInterface.html">IndexedDbInterface</a></li><li><a href="Navbar.html">Navbar</a></li><li><a href="NotificationRecipeAdded.html">NotificationRecipeAdded</a></li><li><a href="NotificationRecipeDeleted.html">NotificationRecipeDeleted</a></li><li><a href="NotificationSelectCookbook.html">NotificationSelectCookbook</a></li><li><a href="RecipeCard.html">RecipeCard</a></li><li><a href="RecipeForm.html">RecipeForm</a></li><li><a href="RecipePage.html">RecipePage</a></li><li><a href="Router.html">Router</a></li><li><a href="SingleCookbook.html">SingleCookbook</a></li><li><a href="SpoonacularInterface.html">SpoonacularInterface</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addRecipe">addRecipe</a></li><li><a href="global.html#bindClearFiltersButton">bindClearFiltersButton</a></li><li><a href="global.html#bindCollapsibleFiltersBindthebuttonstocollapseandexpandthefiltersforthefiltersontheexplorepage.">bindCollapsibleFilters

Bind the buttons to collapse and expand the filters for the filters on the explore page.</a></li><li><a href="global.html#bindCookbookCardButtons">bindCookbookCardButtons</a></li><li><a href="global.html#bindCookbookRecipeCardButtons">bindCookbookRecipeCardButtons</a></li><li><a href="global.html#bindCreateCookbookSave">bindCreateCookbookSave</a></li><li><a href="global.html#bindExploreLoadButton">bindExploreLoadButton</a></li><li><a href="global.html#bindExploreSearchButton">bindExploreSearchButton</a></li><li><a href="global.html#bindHomeExploreRecipeCards">bindHomeExploreRecipeCards</a></li><li><a href="global.html#bindRecipeFormButtons">bindRecipeFormButtons</a></li><li><a href="global.html#bindScaling">bindScaling</a></li><li><a href="global.html#bindSelectCookbookButtons">bindSelectCookbookButtons</a></li><li><a href="global.html#buttonsEditCookbook">buttonsEditCookbook</a></li><li><a href="global.html#connectCreateNewCookbook()">connectCreateNewCookbook()</a></li><li><a href="global.html#connectNavbarButtons">connectNavbarButtons</a></li><li><a href="global.html#connectRecipeAction">connectRecipeAction</a></li><li><a href="global.html#connectRecipeBackButton">connectRecipeBackButton</a></li><li><a href="global.html#constructor">constructor</a></li><li><a href="global.html#createCookbook">createCookbook</a></li><li><a href="global.html#createCreateCookbook">createCreateCookbook</a></li><li><a href="global.html#createEditCookbook">createEditCookbook</a></li><li><a href="global.html#createExplorePage">createExplorePage</a></li><li><a href="global.html#createFooterImg">createFooterImg</a></li><li><a href="global.html#createHomePage">createHomePage</a></li><li><a href="global.html#createNavbar">createNavbar</a></li><li><a href="global.html#createNotificationRecipeAdded">createNotificationRecipeAdded</a></li><li><a href="global.html#createNotificationRecipeDeleted">createNotificationRecipeDeleted</a></li><li><a href="global.html#createNotificationSelectCookbook">createNotificationSelectCookbook</a></li><li><a href="global.html#createRecipeForm">createRecipeForm</a></li><li><a href="global.html#createRecipePage">createRecipePage</a></li><li><a href="global.html#createSingleCookbook">createSingleCookbook</a></li><li><a href="global.html#deleteCookbook">deleteCookbook</a></li><li><a href="global.html#deleteRecipe">deleteRecipe</a></li><li><a href="global.html#editCookbook">editCookbook</a></li><li><a href="global.html#editRecipe">editRecipe</a></li><li><a href="global.html#fillEditCookbook">fillEditCookbook</a></li><li><a href="global.html#getAllCookbooks">getAllCookbooks</a></li><li><a href="global.html#getAllRecipes">getAllRecipes</a></li><li><a href="global.html#getRandomRecipes">getRandomRecipes</a></li><li><a href="global.html#getRecipeInfo">getRecipeInfo</a></li><li><a href="global.html#getRecipes">getRecipes</a></li><li><a href="global.html#homeExploreButton">homeExploreButton</a></li><li><a href="global.html#homeSearchFunction()">homeSearchFunction()</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#initializeDefaultCookbook">initializeDefaultCookbook</a></li><li><a href="global.html#loadExplorePage">loadExplorePage</a></li><li><a href="global.html#makeRequest">makeRequest</a></li><li><a href="global.html#navigate">navigate</a></li><li><a href="global.html#openDb">openDb</a></li><li><a href="global.html#populateCookbooksPage">populateCookbooksPage</a></li><li><a href="global.html#populateExplorePage">populateExplorePage</a></li><li><a href="global.html#populateHomePage">populateHomePage</a></li><li><a href="global.html#populateSelectCookbookOptions">populateSelectCookbookOptions</a></li><li><a href="global.html#populateSingleCookbook">populateSingleCookbook</a></li><li><a href="global.html#toggleExplorePageType">toggleExplorePageType</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Thu Dec 09 2021 08:20:35 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
